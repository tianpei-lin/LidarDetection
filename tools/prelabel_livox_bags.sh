#!/bin/bash

labels=(
20210501T053325_j7-l4e-00011_11_128to148.bag
20210501T053325_j7-l4e-00011_11_43to63.bag
20210501T053325_j7-l4e-00011_12_194to214.bag
20210501T053325_j7-l4e-00011_12_94to114.bag
20210501T053325_j7-l4e-00011_14_33to53.bag
20210501T053325_j7-l4e-00011_16_245to265.bag
20210501T053325_j7-l4e-00011_17_62to82.bag
20210501T053325_j7-l4e-00011_17_87to107.bag
20210501T053325_j7-l4e-00011_18_103to123.bag
20210501T053325_j7-l4e-00011_18_258to278.bag
20210501T053325_j7-l4e-00011_18_48to68.bag
20210501T053325_j7-l4e-00011_26_121to141.bag
20210501T053325_j7-l4e-00011_3_1to21.bag
20210501T053325_j7-l4e-00011_3_211to231.bag
20210501T053325_j7-l4e-00011_3_241to261.bag
20210501T053325_j7-l4e-00011_3_56to76.bag
20210501T053325_j7-l4e-00011_39_201to221.bag
20210501T053325_j7-l4e-00011_4_158to178.bag
20210501T053325_j7-l4e-00011_42_124to144.bag
20210501T053325_j7-l4e-00011_43_168to188.bag
20210501T053325_j7-l4e-00011_43_2to22.bag
20210501T053325_j7-l4e-00011_47_250to270.bag
20210501T053325_j7-l4e-00011_4_83to103.bag
20210501T053325_j7-l4e-00011_50_28to48.bag
20210501T053325_j7-l4e-00011_51_180to200.bag
20210501T053325_j7-l4e-00011_52_71to91.bag
20210501T053325_j7-l4e-00011_58_17to37.bag
20210501T053325_j7-l4e-00011_58_57to77.bag
20210501T053325_j7-l4e-00011_60_123to143.bag
20210501T053325_j7-l4e-00011_60_188to208.bag
20210501T053325_j7-l4e-00011_60_263to283.bag
20210501T053325_j7-l4e-00011_60_3to23.bag
20210501T053325_j7-l4e-00011_60_96to116.bag
20210501T053325_j7-l4e-00011_61_169to189.bag
20210501T053325_j7-l4e-00011_61_264to284.bag
20210501T053325_j7-l4e-00011_61_9to29.bag
20210501T053325_j7-l4e-00011_62_224to244.bag
20210501T053325_j7-l4e-00011_64_249to269.bag
20210501T053325_j7-l4e-00011_68_43to63.bag
20210501T053325_j7-l4e-00011_70_207to227.bag
20210501T053325_j7-l4e-00011_70_262to282.bag
20210501T053325_j7-l4e-00011_71_153to173.bag
20210501T053325_j7-l4e-00011_72_209to229.bag
20210501T053325_j7-l4e-00011_72_241to261.bag
20210501T053325_j7-l4e-00011_74_75to95.bag
20210501T053325_j7-l4e-00011_76_158to178.bag
20210501T053325_j7-l4e-00011_76_208to228.bag
20210501T053325_j7-l4e-00011_8_110to130.bag
20210501T053325_j7-l4e-00011_8_140to160.bag
20210501T053325_j7-l4e-00011_9_159to179.bag
20210501T121642_j7-l4e-00011_10_207to227.bag
20210501T121642_j7-l4e-00011_11_261to281.bag
20210501T121642_j7-l4e-00011_1_161to181.bag
20210501T121642_j7-l4e-00011_1_46to66.bag
20210501T121642_j7-l4e-00011_19_187to207.bag
20210501T121642_j7-l4e-00011_19_217to237.bag
20210501T121642_j7-l4e-00011_31_237to257.bag
20210501T121642_j7-l4e-00011_38_1to21.bag
20210501T121642_j7-l4e-00011_38_59to79.bag
20210501T121642_j7-l4e-00011_45_113to133.bag
20210501T121642_j7-l4e-00011_50_161to181.bag
20210501T121642_j7-l4e-00011_50_206to226.bag
20210501T121642_j7-l4e-00011_50_46to66.bag
20210501T121642_j7-l4e-00011_51_152to172.bag
20210501T121642_j7-l4e-00011_51_240to260.bag
20210501T121642_j7-l4e-00011_8_217to237.bag
20210502T045930_j7-l4e-00011_15_77to97.bag
20210506T054852_j7-l4e-00011_53_120to140.bag
20210506T054852_j7-l4e-00011_53_90to110.bag
20210506T054852_j7-l4e-00011_58_127to147.bag
)

bags_path="/old_home/archive/tianpei/data/bag/"
result_path="/old_home/archive/tianpei/data/prelabel/"

for bag in ${labels[*]}
do
if [ ! -f $bags_path/$bag ];then
    aws s3 cp s3://labeling/benchmark/obstacle_tracking/data/$bag ${bags_path} --endpoint-url=http://172.16.0.3 --profile sz
fi
done


# for label in ${labels[*]}
# do
# #if [ ! -f label/${label}.json ];then
#     aws s3 cp s3://labeling/benchmark/obstacle_tracking/label/${label}.json label/ --endpoint-url=http://172.16.0.3
# #fi
# done

python inference_bag2json.py \
  --cfg_file cfgs/livox_models/pv_rcnn_multiframe.yaml \
  --ckpt /home/tianpei.lin/checkpoints/livox_models/pv_rcnn_multiframe/checkpoint_epoch_80.pth \
  --bag_file ${bags_path} \
  --save_path ${result_path}
